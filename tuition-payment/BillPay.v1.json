{
  "definitions": {
    "BillPayInfo": {
      "title": "1-BillPayInfo",
      "type": "object",
      "description": "账单支付信息",
      "x-tags": [
        "Models"
      ],
      "properties": {
        "billId": {
          "type": "string",
          "description": "PsP 账单编号 PsP全局唯一"
        },
        "paymentAmount": {
          "type": "string",
          "description": "支付人民币金额"
        },
        "billCurrency": {
          "type": "string",
          "description": "账单币种"
        },
        "billAmount": {
          "type": "string",
          "description": "账单金额"
        },
        "expiredTime": {
          "type": "string",
          "format": "date-time",
          "description": "账单过期时间,UTC+0"
        },
        "rateId": {
          "type": "string",
          "description": "支付时使用的汇率ID  如果有该值则为锁定汇率 "
        },
        "rate": {
          "type": "string",
          "description": "锁定的汇率，与rateid一同出现。 "
        },
        "recevingaccount": {
          "$ref": "#/definitions/RecevingAccount"
        },
        "billItem": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/BillPayItemInfo"
          }
        },
        "createTime": {
          "type": "string",
          "default": "sysdate",
          "format": "date-time",
          "description": "账单支付信息生成时间 UT+0"
        },
        "status": {
          "type": "string",
          "default": "init",
          "description": "账单当前状态\n\n| status | description |\n|--------|-------------|\n|init | 账单初始创建 |\n|payed| 账单有资金入帐发生，可进行资料审核操作|\n|reviewed|账单对应贸易材料审核完成,可进行汇兑（分发）处理|\n|exchanged|对应账单汇兑(分发)处理完成|\n|expired|账单过期失效|\n\n状态变迁说明：\ninit --> payed :  账单生成后，当发现有钱转入临时账号时（不一定足额）发生,payed后可对材料信息进行驱动审核。\npayed -->reviewed 对应账单材料审核通过后发生，后续可进行汇兑(分发)处理。\ninit --> expired 相关账单有效期内一直没有支付关闭帐单。\nreviewed --> exchanged 账单完成汇兑处理。\n\n",
          "enum": [
            "init",
            "reviewed",
            "payed",
            "expired"
          ]
        }
      },
      "required": [
        "billId",
        "paymentAmount",
        "billCurrency",
        "billAmount",
        "recevingaccount"
      ]
    },
    "BillPayItemInfo": {
      "title": "4-BillPayItemInfo",
      "type": "object",
      "properties": {
        "tradeCode": {
          "type": "string",
          "description": "该交易项目对应的贸易编码"
        },
        "ItemAmount": {
          "type": "string",
          "description": "项目金额"
        },
        "ItemName": {
          "type": "string",
          "description": "项目名称"
        }
      },
      "description": "账单金额的构成，币种与账单币种同,且ItemAmount的汇总金额要等于billAmount.",
      "x-tags": [
        "Models"
      ]
    },
    "RecevingAccount": {
      "title": "3-RecevingAccount",
      "type": "object",
      "description": "银行转帐收付款帐号信息（国内账号含申报人信息），相关申报人信息需请求时填写，收款银行帐号信息由LianLianPay返回PSP。",
      "x-tags": [
        "Models"
      ],
      "properties": {
        "beneficiaryName": {
          "type": "string",
          "description": "申报人（受益人）姓名"
        },
        "beneficiaryId": {
          "type": "string",
          "description": "申报人（受益人）身份证号码,当该域作为返回值时，相关内容作前4后6Mask处理 "
        },
        "beneficiaryPhone": {
          "type": "string",
          "description": "申报人（受益人）联系手机号码"
        },
        "relationship": {
          "type": "string",
          "enum": [
            "self",
            "family"
          ],
          "description": "申报人（受益人）与受益人的关系\n\n由于中国外汇管制原因，所有资金出境均需进行申报，建议使用实际付款人进行申报.\n\n| relationship | description |\n|--------|-------------|\n|SELF|申报人为留学生本人|\n|FAMILY|申报人为留学生家人，一般要求直系亲属|\n"
        },
        "accountName": {
          "type": "string",
          "description": "账户户名"
        },
        "accountNo": {
          "type": "string",
          "description": "收款帐号"
        },
        "bankBranchName": {
          "type": "string",
          "description": "支行名称"
        },
        "bankName": {
          "type": "string",
          "description": "银行名称"
        },
        "bankZone": {
          "type": "string",
          "description": "银行地区"
        },
        "cnapsBranchId": {
          "type": "string",
          "description": "大额行号"
        }
      },
      "required": [
        "beneficiaryName",
        "beneficiaryId",
        "relationship"
      ]
    },
    "BillFundingTrans": {
      "title": "2-BillFundingTrans",
      "type": "object",
      "description": "收款银行帐号转帐记录信息",
      "x-tags": [
        "Models"
      ],
      "properties": {
        "billId": {
          "type": "string",
          "description": "账单编号"
        },
        "fundingId": {
          "type": "string",
          "description": "银行转帐流水号"
        },
        "payerName": {
          "type": "string",
          "description": "付款人名字"
        },
        "payerBankAccout": {
          "type": "string",
          "description": "付款人银行帐号"
        },
        "payerBankName": {
          "type": "string",
          "description": "付款银行名称"
        },
        "cnapsBranchId": {
          "type": "string",
          "description": "付款银行大额行号"
        },
        "amount": {
          "type": "string",
          "description": "转帐金额(人民币)"
        },
        "createTime": {
          "type": "string",
          "format": "date-time",
          "description": "UTC+0"
        },
        "rfb": {
          "type": "string",
          "description": "银行转账交易附言"
        }
      },
      "required": [
        "billId",
        "fundingId"
      ]
    },
    "ReFundingTrans": {
      "title": "5.ReFundingTrans",
      "type": "object",
      "description": "",
      "x-tags": [
        "Models"
      ],
      "properties": {
        "refundingId": {
          "type": "string",
          "description": "PsP退款id,全局唯一"
        },
        "billId": {
          "type": "string",
          "description": "对应账单编号"
        },
        "amount": {
          "type": "string",
          "description": "退款金额"
        },
        "bankName": {
          "type": "string"
        },
        "bankBranchName": {
          "type": "string"
        },
        "accountName": {
          "type": "string",
          "description": "收款人姓名"
        },
        "accountNo": {
          "type": "string",
          "description": "收款人银行帐号"
        },
        "cnapsBranchId": {
          "type": "string",
          "description": "收款银行大额行号"
        },
        "rbf": {
          "type": "string",
          "description": "退款银行附言"
        },
        "createTime": {
          "type": "string",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "交易状态:\n\n|status|description|\n|------|------------|\n|INIT|退款指令申请成功|\n|SUCCESS|退款成功|\n|PROCESSING|处理中|\n|FAILED|退款失败|\n"
        },
        "failreason": {
          "type": "string",
          "description": "失败原因"
        }
      },
      "required": [
        "refundingId",
        "billId",
        "amount",
        "accountName",
        "accountNo",
        "cnapsBranchId"
      ]
    }
  },
  "paths": {
    "/bills": {
      "post": {
        "summary": "1.Create a Bill for Bank Transfer",
        "operationId": "post-bills",
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "description": "该账单只支持银行转帐支付方式进行缴款,账单信息包含用户需支付费用及转入的银行帐号信息。\n        \n用户支付信息包含:\n \n  (1)应转帐打款的收款银行账号信息.\n             \n  (2).应缴的人民币金额\n                              \n  (3).账单的有效时间（可选）",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "billId": {
                  "type": "string",
                  "description": "psp全局唯一"
                },
                "paymentAmount": {
                  "type": "string",
                  "description": "需支付的人民币金额"
                },
                "billCurrency": {
                  "type": "string",
                  "description": "暂只支持人民币"
                },
                "billAmount": {
                  "type": "string",
                  "description": "人民币时该金额与paymentAmount相同"
                },
                "rate": {
                  "type": "string"
                },
                "rateid": {
                  "type": "string"
                },
                "expiredTime": {
                  "type": "string",
                  "format": "date-time",
                  "description": "UTC 0"
                },
                "billItem": {
                  "type": "array",
                  "description": "账单对应billAmount金额的构成",
                  "items": {
                    "$ref": "#/definitions/BillPayItemInfo"
                  }
                },
                "payeebankInfo": {
                  "$ref": "#/definitions/RecevingAccount"
                }
              },
              "required": [
                "billId",
                "paymentAmount",
                "billCurrency",
                "billAmount",
                "payeebankInfo"
              ]
            },
            "description": ""
          }
        ],
        "tags": [
          "Operations"
        ]
      }
    },
    "/bills/{billId}": {
      "parameters": [
        {
          "type": "string",
          "name": "billId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "2.Query Bill Info by BillID",
        "tags": [
          "Operations"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/BillPayInfo"
            }
          }
        },
        "operationId": "get-bills-billid"
      },
      "delete": {
        "summary": "3.Cancel Bill by BillID",
        "operationId": "delete-bills-billid",
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "description": "对于INIT状态的账单可以进行撤销操作",
        "tags": [
          "Operations"
        ]
      }
    },
    "/bills/{billId}/fundingtrans": {
      "parameters": [
        {
          "type": "string",
          "name": "billId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "4.Get Funding Trans of  Bill",
        "tags": [
          "Operations"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/BillFundingTrans"
              }
            }
          }
        },
        "operationId": "get-bills-billid-fundingtrans",
        "description": ""
      }
    },
    "/bills/{billId}/refundingtrans": {
      "parameters": [
        {
          "type": "string",
          "name": "billId",
          "in": "path",
          "required": true
        }
      ],
      "post": {
        "summary": "5.Create Refunding Trans",
        "operationId": "post-bills-billId-refundingtrans",
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/ReFundingTrans"
            }
          }
        ],
        "description": "对于PsP代收人民币进行进行退款处理,退款的合计金额不能大于原账单已收款金额.\n当前PsP的人民币金额足够进行退款处理.",
        "tags": [
          "Operations"
        ]
      }
    },
    "/bills/{billId}/refundingtrans/{refundingId}": {
      "parameters": [
        {
          "type": "string",
          "name": "billId",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "refundingId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "6.Get Refunding Trans",
        "tags": [
          "Operations"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ReFundingTrans"
            }
          }
        },
        "operationId": "get-bills-billId-refundingtrans-refundingId"
      }
    }
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "schemes": [
    "http"
  ],
  "host": "localhost:3000",
  "info": {
    "title": "a.BillPay API",
    "version": "1.0"
  },
  "swagger": "2.0"
}