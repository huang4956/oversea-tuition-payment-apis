{
  "definitions": {
    "BillPayInfo": {
      "title": "BillPayInfo",
      "type": "object",
      "description": "Bill object in Lianlian Pay's system",
      "x-tags": [
        "Models"
      ],
      "properties": {
        "billId": {
          "type": "string",
          "description": "Unique bill id from client",
          "maxLength": 32
        },
        "paymentAmount": {
          "type": "string",
          "description": "payment amount in CNY"
        },
        "recevingAccount": {
          "$ref": "#/definitions/RecevingAccount"
        },
        "createTime": {
          "type": "string",
          "default": "sysdate",
          "format": "date-time",
          "description": "Bill create time, UT+0"
        }
      },
      "required": [
        "billId",
        "paymentAmount",
        "recevingAccount"
      ]
    },
    "RecevingAccount": {
      "title": "RecevingAccount",
      "type": "object",
      "description": "Lianlian Pay receiving account information, including payee information.\n\nPayee inforation should be included in request and collection account will be return by Lianlian Pay to PSP.",
      "x-tags": [
        "Models"
      ],
      "properties": {
        "payerName": {
          "type": "string",
          "description": "payer name"
        },
        "payerType": {
          "type": "string",
          "description": "payer type\n\n| value | description |\n|--------|-------------|\n|INDIVIDUAL|Individual|\n|CORPORATE|Corporate |"
        },
        "payerIDType": {
          "type": "string",
          "description": "Payer identification type\n\n| beneficiaryIdType| description |\n|--------|-------------|\n|ID_CARD| ID Card|\n|UNIFIED_CREDIT_CODE|Uniform social credit code|"
        },
        "payerID": {
          "type": "string",
          "description": "Payer identification number, digitis between first 4 and last 6 in Lianlian Pay's return will be musked."
        },
        "payerContactNumber": {
          "type": "string",
          "description": "Payer contact number"
        },
        "relationship": {
          "type": "string",
          "enum": [
            "self",
            "family"
          ],
          "description": "Payer and beneficiary relationship, one of:\n\nIf payer type is \"Individual\"\n\n| value | description |\n|--------|-------------|\n|SELF| payer is beneficiary |\n|FAMILY| Payer is the family member of beneficiary|\n|IMMEDIATE FAMILY| Parents, children, spouse|\n|OTHER RELATIVES|Any relative other than \"Parents, children, spouse\"|\n|FRIEND|Friends|\n|Other|other relationship|\n\nIf payer type is \"corporate\" \n\n| value | description |\n|--------|-------------|\n|organization|The company/school to which the student belongs|\n|intermediary|Student commissioned agency|\n|other|other relationship|\n"
        },
        "accountName": {
          "type": "string",
          "description": "receiving account name"
        },
        "accountNo": {
          "type": "string",
          "description": "receiving account number"
        },
        "bankBranchName": {
          "type": "string",
          "description": "receiving account bank branch name"
        },
        "bankName": {
          "type": "string",
          "description": "receiving account bank name, mandatory for corporate payer"
        },
        "cnapsBranchId": {
          "type": "string",
          "description": "CNAPS code"
        },
        "bankDistrict": {
          "type": "string",
          "description": "Receiving account bank branch address"
        }
      },
      "required": [
        "payerName",
        "payerType",
        "payerIDType",
        "payerID"
      ]
    },
    "BillFundingTrans": {
      "title": "BillFundingTrans",
      "type": "object",
      "description": "Bill funding transication record object in Lianlian Pay's system",
      "x-tags": [
        "Models"
      ],
      "properties": {
        "billId": {
          "type": "string",
          "description": "Unique bill id from client"
        },
        "fundingId": {
          "type": "string",
          "description": "Funding transaction id in Lianlian Pay's system"
        },
        "payerName": {
          "type": "string",
          "description": "Payer name"
        },
        "payerBankAccout": {
          "type": "string",
          "description": "payer bank account number"
        },
        "payerBankName": {
          "type": "string",
          "description": "payer bank name"
        },
        "amount": {
          "type": "string",
          "description": "amount in CNY"
        },
        "createTime": {
          "type": "string",
          "description": "Funding transication time\nUTC+0"
        },
        "rfb": {
          "type": "string",
          "description": "rfb"
        }
      },
      "required": [
        "billId",
        "fundingId"
      ]
    },
    "ReFundingTrans": {
      "title": "ReFundingTrans",
      "type": "object",
      "description": "Refunding transication record object in Lianlian Pay's system",
      "x-tags": [
        "Models"
      ],
      "properties": {
        "refundingId": {
          "type": "string",
          "description": "Unique refunding request id"
        },
        "billId": {
          "type": "string",
          "description": "bill id from client"
        },
        "amount": {
          "type": "string",
          "description": "requested refunding amount"
        },
        "bankName": {
          "type": "string",
          "description": "beneficiary bank name"
        },
        "bankAccountType": {
          "type": "string",
          "description": "Beneficiary account type, one of:\n\n|value|description|\n|------|------------|\n|INDIVIDUAL|Individual account|\n|CORPORATE|Corporate account|"
        },
        "accountName": {
          "type": "string",
          "description": "beneficiary account name"
        },
        "accountNo": {
          "type": "string",
          "description": "beneficiary account number"
        },
        "rbf": {
          "type": "string",
          "description": "rfb"
        },
        "createTime": {
          "type": "string",
          "format": "date-time",
          "description": "Refunding create time"
        },
        "status": {
          "type": "string",
          "description": "refunding status, one of:\n\n| value |description|\n|------|------------|\n|INIT| Init |\n|SUCCESS|Success|\n|PROCESSING|Processing |\n|FAILED|退款失败|\n"
        },
        "failreason": {
          "type": "string",
          "description": "Refund failure reason"
        }
      },
      "required": [
        "refundingId",
        "billId",
        "amount",
        "bankName",
        "accountName",
        "accountNo"
      ]
    }
  },
  "paths": {
    "/bill": {
      "post": {
        "summary": "Create a Bill for Bank Transfer",
        "operationId": "post-bills",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/BillPayInfo"
            }
          },
          "400": {
            "description": "Bad Request\n\nPossible error codes:\n\n| Code | Description |\n|------|-------------|\n| 020101|Payer audit failure |\n| 020201|Beneficiary account apply failure |\n| 020402|billId already exist|\n| 999995 |Parameter is error. |",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "type": "object",
              "properties": {}
            }
          }
        },
        "description": "Currenly bill can only be paid via wire transfer. Payee information such as due amount and payer information shall be included in the API request body.\n\nBeneficiary account will be returned by Lianlian Pay in request respone boday.",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "billId": {
                  "type": "string",
                  "maxLength": 32,
                  "description": "unique billId from client"
                },
                "paymentAmount": {
                  "type": "string",
                  "description": "payment amount in CNY"
                },
                "payerName": {
                  "type": "string",
                  "description": "payer name in Chinese",
                  "maxLength": 128
                },
                "payerType": {
                  "type": "string",
                  "description": "payer type, one of\n\n| value | description |\n|--------|-------------|\n|INDIVIDUAL|Individual|\n|CORPORATE |Corporate|",
                  "enum": [
                    "INDIVIDUAL",
                    "CORPORATE"
                  ]
                },
                "payerIDType": {
                  "type": "string",
                  "description": "payer identification type\n\n| value| description |\n|--------|-------------|\n|ID_CARD|ID Card|\n|UNIFIED_CREDIT_CODE|Uniform social credit code |",
                  "enum": [
                    "ID_CARD",
                    "UNIFIED_CREDIT_CODE"
                  ]
                },
                "payerID": {
                  "type": "string",
                  "description": "payer identification number",
                  "maxLength": 64
                },
                "payerContactNumber": {
                  "type": "string",
                  "maxLength": 32,
                  "description": "payer contact number, mandatory for corporate payer"
                },
                "relationship": {
                  "type": "string",
                  "description": "Payer and beneficiary relationship, one of:\n\n| value | description |\n|--------|-------------|\n|SELF| payer is beneficiary |\n|FAMILY| Payer is the family member of beneficiary|",
                  "enum": [
                    "SELF",
                    "FAMILY"
                  ]
                }
              },
              "required": [
                "billId",
                "paymentAmount",
                "payerName",
                "payerType",
                "payerIDType",
                "payerID"
              ]
            },
            "description": ""
          }
        ],
        "tags": [
          "Operations"
        ]
      },
      "parameters": []
    },
    "/bill/{billId}": {
      "parameters": [
        {
          "type": "string",
          "name": "billId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Query Bill Info by BillID",
        "tags": [
          "Operations"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/BillPayInfo"
            }
          },
          "400": {
            "description": "Bad Request\n\nPossible error codes:\n\n| Code | Description |\n|------|-------------|\n| 999995 | \\[PARAMETER\\] ERROR_MESSAGE |",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "type": "object",
              "properties": {}
            }
          }
        },
        "operationId": "get-bills-billid",
        "description": "Get bill details in Lianlian Pay's system by `billId`",
        "parameters": [
          {
            "in": "formData",
            "type": "string"
          }
        ]
      }
    },
    "/refundingtrans": {
      "parameters": [],
      "post": {
        "summary": "Create Refunding Trans",
        "operationId": "post-bills-billId-refundingtrans",
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request\n\nPossible error codes:\n\n| Code | Description |\n|------|-------------|\n| 020608| CNY refunding amount exceed total funding amount |\n| 020609 | refundingId already exist |\n| 999995 | \\[PARAMETER\\] ERROR_MESSAGE |",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "type": "object",
              "properties": {}
            }
          }
        },
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "refundingId": {
                  "type": "string",
                  "description": "unique refunding request id from client",
                  "maxLength": 32
                },
                "billId": {
                  "type": "string",
                  "description": "bill id from client",
                  "maxLength": 32
                },
                "amount": {
                  "type": "string",
                  "description": "refunding amount"
                },
                "bankAccountType": {
                  "type": "string",
                  "description": "refunding beneficiary bank account type, one of:\n\n|value | description |\n|------|------------|\n|INDIVIDUAL|Individual account|\n|CORPORATE|Corporate account |",
                  "enum": [
                    "INDIVIDUAL",
                    "CORPORATE"
                  ]
                },
                "bankName": {
                  "type": "string",
                  "description": "Bank name",
                  "maxLength": 128
                },
                "bankBranchName": {
                  "type": "string",
                  "description": "Bank branch name",
                  "maxLength": 256
                },
                "cnapsBranchId": {
                  "type": "string",
                  "description": "CNAPS code"
                },
                "accountName": {
                  "type": "string",
                  "description": "Account name"
                },
                "accountNo": {
                  "type": "string",
                  "description": "account number"
                },
                "rbf": {
                  "type": "string",
                  "description": "rfb",
                  "maxLength": 40
                }
              },
              "required": [
                "refundingId",
                "billId",
                "amount",
                "bankAccountType",
                "accountName",
                "accountNo"
              ]
            },
            "description": ""
          }
        ],
        "description": "Create a single refund request, results will be noticed via webhook event. Client can also use `Query Refunding Trans` API to retrieve coresponding request results.\n\nRequested total refudning amount shall no larger than total funding amount.",
        "tags": [
          "Operations"
        ]
      }
    },
    "/refundingtrans/{refundingId}": {
      "parameters": [
        {
          "type": "string",
          "name": "refundingId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Query Refunding Trans",
        "tags": [
          "Operations"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ReFundingTrans"
            }
          },
          "400": {
            "description": "Bad Request\n\nPossible error codes:\n\n| Code | Description |\n|------|-------------|\n| 999995 | \\[PARAMETER\\] ERROR_MESSAGE |",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "": {
            "schema": {
              "$ref": "#/definitions/ReFundingTrans"
            }
          }
        },
        "operationId": "get-refundingtrans",
        "description": "Get refund request details by `refundingId`"
      }
    },
    "/fundingtrans/{billId}": {
      "parameters": [
        {
          "type": "string",
          "name": "billId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Query Funding Trans of  Bill",
        "tags": [
          "Operations"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/BillFundingTrans"
              }
            }
          },
          "400": {
            "description": "Bad Request\n\nPossible error codes:\n\n| Code | Description |\n|------|-------------|\n| 999995 | \\[PARAMETER\\] ERROR_MESSAGE |",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "type": "object",
              "properties": {}
            }
          }
        },
        "operationId": "get-bills-billid-fundingtrans",
        "description": "Get bill transication records by `billId`",
        "parameters": []
      }
    }
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "schemes": [
    "https"
  ],
  "host": "global-api.lianlianpay.com/outbound/bill/v1",
  "info": {
    "title": "BillPay API",
    "version": "1.0",
    "description": ""
  },
  "swagger": "2.0"
}